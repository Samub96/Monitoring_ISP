Vagrant.configure("2") do |config|
  # DNS Server
  config.vm.define "dns" do |dns|
    dns.vm.box = "ubuntu/jammy64"
    dns.vm.hostname = "dns"
    dns.vm.network "private_network", ip: "192.168.56.10"
    dns.vm.provision "ansible" do |ansible|
      ansible.playbook = "ansible/playbooks/dns.yml"
      ansible.inventory_path = "ansible/inventory.ini"
    end
  end

  # DHCP Server
  config.vm.define "dhcp" do |dhcp|
    dhcp.vm.box = "ubuntu/jammy64"
    dhcp.vm.hostname = "dhcp"
    dhcp.vm.network "private_network", ip: "192.168.56.11"
    dhcp.vm.provision "ansible" do |ansible|
      ansible.playbook = "ansible/playbooks/dhcp.yml"
      ansible.inventory_path = "ansible/inventory.ini"
    end
  end

  # Web Server
  config.vm.define "web" do |web|
    web.vm.box = "ubuntu/jammy64"
    web.vm.hostname = "web"
    web.vm.network "private_network", ip: "192.168.56.12"
    web.vm.provision "ansible" do |ansible|
      ansible.playbook = "ansible/playbooks/web.yml"
      ansible.inventory_path = "ansible/inventory.ini"
    end
  end

  # Reverse Proxy
  config.vm.define "proxy" do |proxy|
    proxy.vm.box = "ubuntu/jammy64"
    proxy.vm.hostname = "proxy"
    proxy.vm.network "private_network", ip: "192.168.56.13"
    proxy.vm.provision "ansible" do |ansible|
      ansible.playbook = "ansible/playbooks/reverse-proxy.yml"
      ansible.inventory_path = "ansible/inventory.ini"
    end
  end
end
